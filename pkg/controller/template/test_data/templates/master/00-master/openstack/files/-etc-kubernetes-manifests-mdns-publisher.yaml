contents:
  source: data:,kind%3A%20Pod%0AapiVersion%3A%20v1%0Ametadata%3A%0A%20%20name%3A%20mdns-publisher%0A%20%20namespace%3A%20kube-system%0A%20%20creationTimestamp%3A%0A%20%20deletionGracePeriodSeconds%3A%2065%0A%20%20labels%3A%0A%20%20%20%20app%3A%20kni-infra-mdns%0Aspec%3A%0A%20%20volumes%3A%0A%20%20-%20name%3A%20resource-dir%0A%20%20%20%20hostPath%3A%0A%20%20%20%20%20%20path%3A%20%22%2Fetc%2Fkubernetes%2Fstatic-pod-resources%2Fmdns%22%0A%20%20-%20name%3A%20conf-dir%0A%20%20%20%20hostPath%3A%0A%20%20%20%20%20%20path%3A%20%22%2Fetc%2Fkubernetes%2Fstatic-pod-resources%2Fmdns%22%0A%20%20initContainers%3A%0A%20%20-%20name%3A%20render-config%0A%20%20%20%20image%3A%20quay.io%2Fopenshift%2Forigin-node%3Alatest%0A%20%20%20%20command%3A%0A%20%20%20%20-%20%22%2Fbin%2Fbash%22%0A%20%20%20%20-%20%22-c%22%0A%20%20%20%20-%20%7C%0A%20%20%20%20%20%20%23%2Fbin%2Fbash%0A%20%20%20%20%20%20set%20-ex%0A%0A%20%20%20%20%20%20CLUSTER_NAME%3Dmy-test-cluster%0A%20%20%20%20%20%20DOMAIN%3Dmy-test-cluster.installer.team.coreos.systems%0A%20%20%20%20%20%20API_VIP%3D%22%24(dig%20%2Bnoall%20%2Banswer%20%22api.%24%7BDOMAIN%7D%22%20%7C%20awk%20'%7Bprint%20%24NF%7D')%22%0A%20%20%20%20%20%20SUBNET_CIDR%3D%22%24(ip%20addr%20show%20%7C%20grep%20-v%20%22scope%20host%22%20%7C%20grep%20-Po%20'inet%20%5CK%5B%5Cd.%5D%2B%2F%5B%5Cd.%5D%2B'%20%7C%20head%20-n1)%22%0A%20%20%20%20%20%20PREFIX%3D%22%24%7BSUBNET_CIDR%23*%2F%7D%22%0A%20%20%20%20%20%20NON_VIRTUAL_IP%3D%22%24%7BSUBNET_CIDR%25%2F*%7D%22%0A%20%20%20%20%20%20MASTER_HOSTNAME%3D%22%24(hostname%20-s%20%7C%20cut%20-d%20'-'%20-f%204)-%24(hostname%20-s%20%7C%20cut%20-d%20'-'%20-f%205).local.%22%0A%20%20%20%20%20%20ETCD_HOSTNAME%3D%22%24(echo%20%22%24MASTER_HOSTNAME%22%20%7C%20sed%20's%3Bmaster%3Betcd%3B')%22%0A%20%20%20%20%20%20export%20MASTER_HOSTNAME%0A%20%20%20%20%20%20export%20ETCD_HOSTNAME%0A%20%20%20%20%20%20export%20NON_VIRTUAL_IP%0A%20%20%20%20%20%20export%20DOMAIN%0A%20%20%20%20%20%20export%20CLUSTER_NAME%0A%20%20%20%20%20%20%2Fusr%2Flibexec%2Fplatform-python%20-c%20%22from%20__future__%20import%20print_function%0A%20%20%20%20%20%20import%20os%0A%20%20%20%20%20%20with%20open('%2Fetc%2Fkubernetes%2Fstatic-pod-resources%2Fconfig.template'%2C%20'r')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20content%20%3D%20f.read()%0A%20%20%20%20%20%20with%20open('%2Fetc%2Fmdns%2Fconfig.hcl'%2C%20'w')%20as%20dest%3A%0A%20%20%20%20%20%20%20%20%20%20print(os.path.expandvars(content)%2C%20file%3Ddest)%22%0A%20%20%20%20resources%3A%20%7B%7D%0A%20%20%20%20volumeMounts%3A%0A%20%20%20%20-%20name%3A%20resource-dir%0A%20%20%20%20%20%20mountPath%3A%20%22%2Fetc%2Fkubernetes%2Fstatic-pod-resources%22%0A%20%20%20%20-%20name%3A%20conf-dir%0A%20%20%20%20%20%20mountPath%3A%20%22%2Fetc%2Fmdns%22%0A%20%20%20%20imagePullPolicy%3A%20IfNotPresent%0A%20%20containers%3A%0A%20%20-%20name%3A%20mdns-publisher%0A%20%20%20%20image%3A%20quay.io%2Fopenshift-metal3%2Fmdns-publisher%3Alatest%0A%20%20%20%20args%3A%0A%20%20%20%20-%20%22--debug%22%0A%20%20%20%20resources%3A%0A%20%20%20%20%20%20requests%3A%0A%20%20%20%20%20%20%20%20cpu%3A%20150m%0A%20%20%20%20%20%20%20%20memory%3A%201Gi%0A%20%20%20%20volumeMounts%3A%0A%20%20%20%20-%20name%3A%20conf-dir%0A%20%20%20%20%20%20mountPath%3A%20%22%2Fetc%2Fmdns%22%0A%20%20%20%20terminationMessagePolicy%3A%20FallbackToLogsOnError%0A%20%20%20%20imagePullPolicy%3A%20IfNotPresent%0A%20%20hostNetwork%3A%20true%0A%20%20tolerations%3A%0A%20%20-%20operator%3A%20Exists%0A%20%20priorityClassName%3A%20system-node-critical%0Astatus%3A%20%7B%7D%0A
  verification: {}
filesystem: root
mode: 420
path: /etc/kubernetes/manifests/mdns-publisher.yaml
